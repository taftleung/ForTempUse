{
	"info": {
		"_postman_id": "ebc25055-b212-42ba-b7f0-bc96f9639eec",
		"name": "Geidea API Collection",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
		"_exporter_id": "12409896"
	},
	"item": [
		{
			"name": "Create Session",
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"exec": [
							"function generateRandomString(length) {\r",
							"    var chars = '0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ';\r",
							"    var result = '';\r",
							"    for (var i = length; i > 0; --i) result += chars[Math.floor(Math.random() * chars.length)];\r",
							"    return result;\r",
							"}\r",
							"\r",
							"let randomReferenceId = 'POC-UAE-' + generateRandomString(6);\r",
							"pm.environment.set(\"randomReferenceId\", randomReferenceId);\r",
							"\r",
							"let randomAmount = (Math.random() * 100).toFixed(2);\r",
							"pm.environment.set(\"randomAmount\", randomAmount);"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"auth": {
					"type": "basic",
					"basic": [
						{
							"key": "password",
							"value": "75b027c6-52da-4153-90c1-b0f69567c198",
							"type": "string"
						},
						{
							"key": "username",
							"value": "02671077-f3e3-47d5-8174-56a06b2897b5",
							"type": "string"
						}
					]
				},
				"method": "POST",
				"header": [],
				"body": {
					"mode": "raw",
					"raw": "{\r\n  \"amount\": {{randomAmount}},\r\n  \"callbackUrl\": \"https://webhook.site/6fee521c-92b2-47dc-94a9-2cf6cb465852\",\r\n  \"currency\": \"AED\",\r\n  \"language\": \"en\",\r\n  \"merchantReferenceId\": \"{{randomReferenceId}}\",\r\n  \"order\": {\r\n    \"items\": [\r\n      {\r\n        \"name\": \"Nike Shoes\",\r\n        \"merchantItemId\": \"product-1234\",\r\n        \"categories\": \"other\",\r\n        \"count\": 2,\r\n        \"price\": 12.34\r\n      }\r\n    ],\r\n    \"description\": \"This is a description\"\r\n  },\r\n  \"paymentOperation\": \"Pay\",\r\n  \"returnUrl\": \"https://webhook.site/6fee521c-92b2-47dc-94a9-2cf6cb465852\",\r\n  \"cardOnFile\": true,\r\n  \"paymentOptions\": [\r\n    {\r\n      \"paymentMethods\": \"visa\",\r\n      \"label\": \"visa\"\r\n    }\r\n  ]\r\n}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "https://api.merchant.geidea.net/payment-intent/api/v1/direct/session",
					"protocol": "https",
					"host": [
						"api",
						"merchant",
						"geidea",
						"net"
					],
					"path": [
						"payment-intent",
						"api",
						"v1",
						"direct",
						"session"
					]
				}
			},
			"response": []
		},
		{
			"name": "Create Session (With Token)",
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"exec": [
							"function generateRandomString(length) {\r",
							"    var chars = '0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ';\r",
							"    var result = '';\r",
							"    for (var i = length; i > 0; --i) result += chars[Math.floor(Math.random() * chars.length)];\r",
							"    return result;\r",
							"}\r",
							"\r",
							"let randomReferenceId = 'POC-UAE-' + generateRandomString(6);\r",
							"pm.environment.set(\"randomReferenceId\", randomReferenceId);\r",
							"\r",
							"let randomAmount = (Math.random() * 100).toFixed(2);\r",
							"pm.environment.set(\"randomAmount\", randomAmount);"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"auth": {
					"type": "basic",
					"basic": [
						{
							"key": "password",
							"value": "75b027c6-52da-4153-90c1-b0f69567c198",
							"type": "string"
						},
						{
							"key": "username",
							"value": "02671077-f3e3-47d5-8174-56a06b2897b5",
							"type": "string"
						}
					]
				},
				"method": "POST",
				"header": [],
				"body": {
					"mode": "raw",
					"raw": "{\r\n  \"amount\": {{randomAmount}},\r\n  \"callbackUrl\": \"https://webhook.site/6fee521c-92b2-47dc-94a9-2cf6cb465852\",\r\n  \"currency\": \"AED\",\r\n  \"language\": \"en\",\r\n  \"merchantReferenceId\": \"{{randomReferenceId}}\",\r\n  \"tokenId\": \"48c9969a-ac6f-44ed-7eef-08dc12e9095b\"\r\n}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "https://api.merchant.geidea.net/payment-intent/api/v1/direct/session",
					"protocol": "https",
					"host": [
						"api",
						"merchant",
						"geidea",
						"net"
					],
					"path": [
						"payment-intent",
						"api",
						"v1",
						"direct",
						"session"
					]
				}
			},
			"response": []
		},
		{
			"name": "Fetch Order / Transaction by Merchant Reference ID",
			"request": {
				"auth": {
					"type": "basic",
					"basic": [
						{
							"key": "password",
							"value": "75b027c6-52da-4153-90c1-b0f69567c198",
							"type": "string"
						},
						{
							"key": "username",
							"value": "02671077-f3e3-47d5-8174-56a06b2897b5",
							"type": "string"
						}
					]
				},
				"method": "GET",
				"header": [],
				"url": {
					"raw": "https://api.merchant.geidea.net/pgw/api/v1/direct/order?MerchantReferenceId=POC-UAE-osJe5I",
					"protocol": "https",
					"host": [
						"api",
						"merchant",
						"geidea",
						"net"
					],
					"path": [
						"pgw",
						"api",
						"v1",
						"direct",
						"order"
					],
					"query": [
						{
							"key": "MerchantReferenceId",
							"value": "POC-UAE-osJe5I"
						}
					]
				}
			},
			"response": []
		},
		{
			"name": "Void Payment",
			"request": {
				"auth": {
					"type": "basic",
					"basic": [
						{
							"key": "password",
							"value": "75b027c6-52da-4153-90c1-b0f69567c198",
							"type": "string"
						},
						{
							"key": "username",
							"value": "02671077-f3e3-47d5-8174-56a06b2897b5",
							"type": "string"
						}
					]
				},
				"method": "POST",
				"header": [],
				"body": {
					"mode": "raw",
					"raw": "{\r\n  \"OrderId\": \"0255851e-abe2-4fc0-e702-08dc0b66e0c0\",\r\n  \"callbackUrl\": \"https://webhook.site/6fee521c-92b2-47dc-94a9-2cf6cb465852\"\r\n}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "https://api.merchant.geidea.net/pgw/api/v3/direct/void",
					"protocol": "https",
					"host": [
						"api",
						"merchant",
						"geidea",
						"net"
					],
					"path": [
						"pgw",
						"api",
						"v3",
						"direct",
						"void"
					]
				}
			},
			"response": []
		},
		{
			"name": "Refund",
			"request": {
				"auth": {
					"type": "basic",
					"basic": [
						{
							"key": "password",
							"value": "75b027c6-52da-4153-90c1-b0f69567c198",
							"type": "string"
						},
						{
							"key": "username",
							"value": "02671077-f3e3-47d5-8174-56a06b2897b5",
							"type": "string"
						}
					]
				},
				"method": "POST",
				"header": [],
				"body": {
					"mode": "raw",
					"raw": "{\r\n  \"orderId\": \"0255851e-abe2-4fc0-e702-08dc0b66e0c0\",\r\n  \"callbackUrl\": \"https://webhook.site/6fee521c-92b2-47dc-94a9-2cf6cb465852\",\r\n  \"refundAmount\": 10.00\r\n}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "https://api.merchant.geidea.net/pgw/api/v1/direct/refund",
					"protocol": "https",
					"host": [
						"api",
						"merchant",
						"geidea",
						"net"
					],
					"path": [
						"pgw",
						"api",
						"v1",
						"direct",
						"refund"
					]
				}
			},
			"response": []
		}
	]
}